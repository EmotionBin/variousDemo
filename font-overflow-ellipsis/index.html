<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>font-overflow-ellipsis</title>
  <script src="./vendor/vue/vue.js"></script>
  <style>
    *{
      margin: 0;
      box-sizing: border-box;
    }
    .head{
      text-align: center;
      margin-bottom: 20px;
    }
    .fontOverflowEllipsis{
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .font_demo{
      width: 600px;
      padding: 10px;
      margin: 0 auto;
      background-color: #d1d1d1;
      box-shadow: 0 0 3px #666;
    }
    .font_warp{
      display: -webkit-box;
      overflow: hidden;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 5;
      width: 100%;
      /* padding: 10px; */
      word-break: break-all;
    }
    .font_warp.unfold{
      -webkit-line-clamp: unset;
    }
    .font_btn{
      display: flex;
      justify-content: flex-end;
      color: blue;
      cursor: pointer;
      background-color: #d1d1d1;
    }
  </style>
</head>
<body>
  <div class="fontOverflowEllipsis">
    <div class="head">
      <h1>å¤šè¡Œæ–‡æœ¬æº¢å‡ºçœç•¥å·+å±•å¼€ğŸ˜</h1>
    </div>
    <div class="font_demo">
      <div class="font_warp" ref="fontRef" :class="{'unfold':!isOverflow}">
        <span v-for="i in count">æˆ‘å¤ªéš¾äº†</span>
      </div>
      <div class="font_btn" @click="fontFormat">
        <template v-if="isTextExceed">
          <span v-if="isOverflow">å±•å¼€</span>
          <span v-if="!isOverflow">æ”¶èµ·</span>
        </template>
      </div>
    </div>
  </div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js"></script>
<script type="text/javascript">
  var fontOverflowEllipsis_el = new Vue({
    el:'.fontOverflowEllipsis',
    data:{
      count:100,
      //åˆ¤æ–­æ–‡å­—æ˜¯å¦æº¢å‡º
      isOverflow:true,
      //åˆ¤æ–­æ–‡å­—æ˜¯å¦è¶…è¿‡é™åˆ¶ï¼Œå¦‚æœæ–‡å­—è¾ƒå°‘æ²¡è¶…è¿‡é™åˆ¶ä¸ºfalseï¼Œåä¹‹ä¸ºtrue
      //è¿™ä¸ªå­—æ®µç”¨äºåˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºå±•å¼€å’Œæ”¶èµ·ï¼Œé˜²æ­¢æ–‡å­—è¿‡å°‘æ—¶ä»ç„¶æ˜¾ç¤ºå±•å¼€å’Œæ”¶èµ·
      isTextExceed:false
    },
    mounted() {
      this.init();
		},
		destroyed () {

		},
    computed:{

    },
    methods:{
      init(){
        //æ‹¿åˆ°æ–‡æœ¬çš„dom
        const fontDom = this.$refs.fontRef;
        //å½“æ–‡æœ¬æº¢å‡ºæ—¶ï¼Œè¿™ä¸ªdivçš„é«˜åº¦æ˜¯105pxï¼Œåªéœ€è¦åˆ¤æ–­å½“å‰è¿™ä¸ªdivçš„é«˜åº¦æ˜¯å¦å°äº105pxå³å¯åˆ¤æ–­æ–‡å­—æ˜¯å¦è¶…è¿‡æŒ‡å®šæ•°é‡
        this.isTextExceed =  fontDom.offsetHeight < 105 ? false : true;
        //è·å–æ»šåŠ¨å¯è§†åŒºåŸŸé«˜åº¦
        const viewHeight = fontDom.clientHeight;
        //è·å–æ•´ä¸ªå¯æ»šåŠ¨åŒºåŸŸé«˜åº¦
        const scrollHeight = fontDom.scrollHeight;
        console.log(fontDom.scrollHeight);
        console.log(fontDom.clientHeight);
        //æ€è·¯ï¼šå½“å…ƒç´ çš„scrollHeight > clientHeightæ—¶ï¼Œåˆ™äº§ç”Ÿæº¢å‡º
        this.isOverflow = scrollHeight > viewHeight ? true : false;
      },
      fontFormat(){
        this.isOverflow = !this.isOverflow;
      }
    }
  });
</script>
</html>