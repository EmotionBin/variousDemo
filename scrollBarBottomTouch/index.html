<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>scrollBarBottomTouch demo</title>
  <script src="./vendor/vue/vue.js"></script>
  <style>
    *{
      margin: 0;
      box-sizing: border-box;
    }
    .head{
      text-align: center;
      margin-bottom: 20px;
    }
    .scrollBarBottomTouch{
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .scroll_demo{
      width: 200px;
      height: 600px;
      margin: 0 auto;
      background-color: #d1d1d1;
      box-shadow: 0 0 3px #666;
    }
    .scroll_warp{
      width: 100%;
      height: 100%;
      padding: 10px;
      overflow: auto;
    }
    .scroll_item{
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100px;
      margin-bottom: 10px;
      background-color: #fd79a8;
    }
    .footer{
      margin-top: 20px;
      text-align: center;
    }
    /* è¿™é‡Œæ·»åŠ å…¨å±€çš„æ»šåŠ¨æ¡æ ·å¼ */
    /* å¼€å§‹ */
    *::-webkit-scrollbar-button {
      display: none;
    }

    *::-webkit-scrollbar-thumb {
      border-radius: 5px;
      display: inline-block;
      border: 1px solid #E1E8EF;
      background-color: #888;
    }

    *::-webkit-scrollbar-track {
      background-color: #E1E8EF;
    }

    *::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    /* ç»“æŸ */
    
  </style>
</head>
<body>
  <div class="scrollBarBottomTouch">
    <div class="head">
      <h1>æ»šåŠ¨æ¡è§¦åº•è§¦å‘äº‹ä»¶ç»§ç»­åŠ è½½æ•°æ®(å¯ç”¨äºå®ç°æ‡’åŠ è½½æˆ–æ•°æ®éƒ¨åˆ†åŠ è½½ğŸ˜)</h1>
    </div>
    <div class="scroll_demo">
      <div class="scroll_warp" ref="scrollDom">
        <div class="scroll_item" v-for="i in count">
          {{i}}
        </div>
      </div>
      <div class="footer">
        <span>æ€»æ•°ç›®:{{count}}</span>
      </div>
    </div>
  </div>
</body>
<script type="text/javascript">
  var scrollBarBottomTouch_el = new Vue({
    el:'.scrollBarBottomTouch',
    data:{
      count:10
    },
    mounted() {
			//åœ¨åˆå§‹åŒ–çš„æ—¶å€™ç›‘å¬é¼ æ ‡æ»šè½®æ»šåŠ¨äº‹ä»¶
			this.$refs.scrollDom.addEventListener('scroll', this.handleScroll);
		},
		destroyed () {
			//åœ¨ç»„ä»¶é”€æ¯çš„æ—¶å€™å–æ¶ˆå¯¹é¼ æ ‡æ»šè½®æ»šåŠ¨äº‹ä»¶çš„ç›‘å¬
			this.$refs.scrollDom.removeEventListener('scroll', this.handleScroll)
		},
    computed:{
      
    },
    methods:{
      //å½“æ»šåŠ¨æ»šåŠ¨æ¡çš„æ—¶å€™è§¦å‘çš„äº‹ä»¶
      handleScroll(){
        const that = this;
        const scrollDom = this.$refs.scrollDom;
        //è·å–æ»šåŠ¨å¯è§†åŒºåŸŸé«˜åº¦
        const viewHeight = scrollDom.clientHeight;
        //è·å–å½“å‰æ»šåŠ¨ä½ç½®
        const curScroll = scrollDom.scrollTop;
        //è·å–æ•´ä¸ªæ»šåŠ¨æ¡é«˜åº¦
        const scrollHeight = scrollDom.scrollHeight;
        //åˆ¤æ–­æ»šåŠ¨æ¡è§¦åº•(æ»šåŠ¨å¯è§†åŒºåŸŸé«˜åº¦ + å½“å‰æ»šåŠ¨ä½ç½® === æ•´ä¸ªæ»šåŠ¨é«˜åº¦)
        if(viewHeight + curScroll === scrollHeight){
          console.log('æ»šåŠ¨æ¡è§¦åº•');
          that.count += 5;
        }
      }
    }
  });
</script>
</html>